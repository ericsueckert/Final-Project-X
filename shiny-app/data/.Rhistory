showland = TRUE,
landcolor = toRGB("black"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
plot_ly(data,
lon = lng,
lat = lat,
text = paste('<b>Name:</b>', data[,"Victim Name"], '<br><b>Shots Fired:</b>', data$shots_fired),
hoverinfo = 'text',
marker = list(size = 1 + shots_fired/3, opacity = .4, color = 'red'),
type = 'scattergeo',
locationmode = 'USA-states'
) %>%
layout(title = 'Police Shootings', geo = g)
### Bonus: create informative hover text ###
### Bonus: Use multiple colors ###
### Exercise 3 ###
library(jsonlite)
library(dplyr)
library(plotly)
# Read in this police shooting JSON data
# https://raw.githubusercontent.com/mkfreeman/police-shooting/master/data/response.json
data <- fromJSON('https://raw.githubusercontent.com/mkfreeman/police-shooting/master/data/response.json')
View(data)
# Dealing with the `Shots Fired` column
# Creating a new Numeric variable with no space in the name
# Replacing NA values with the mean (that makes sense, right?)
data$shots_fired <- as.numeric(data[,'Shots Fired'])
data <- data %>%
mutate(shots_fired = ifelse(is.na(shots_fired), mean(shots_fired, na.rm = T), shots_fired))
# Create a bubble map of the data
g<- list(
scope= 'usa',
projecction<- list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("black"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
plot_ly(data,
lon = lng,
lat = lat,
text = paste('<b>Name:</b>', data[,"Victim Name"], '<br><b>Shots Fired:</b>', data$shots_fired),
hoverinfo = 'text',
marker = list(size = 1 + shots_fired/3, opacity = .4, color = 'red'),
type = 'scattergeo',
locationmode = 'USA-states'
) %>%
layout(title = 'Police Shootings', geo = g)
### Bonus: create informative hover text ###
### Bonus: Use multiple colors ###
install.packages("RColorBrewer")
library(dplyr)
library(Cairo)
library(rgeos)
library(plotly)
library(knitr)
library(ggplot2)
library(maptools)
library(scales)
library(RColorBrewer)
set.seed(8000)
states.shp <- readShapeSpatial("USA_adm1.shp")
library(rgeos)
install.packages('rgeos', type="source")
install.packages('rgdal', type="source")
library(rgeos)
install.packages('rgeos', type="source")
library(rgeos)
library(rgeos)
library(RgoogleMaps)
states.shp <- readShapeSpatial("USA_adm1.shp")
library(rgdal)
library(rgdal)
install.packages('rgdal', type="source")
library(rgdal)
c(3,5,4,7,4,5,6,4,3,2)
sd(c)
sd(c)
c <-c(3,5,4,7,4,5,6,4,3,2)
sd(c)
x<- c(29,40,54,55,72)
y<- c(0.49, 1.59, 1.69, 1.82, 3.1)
sd(x)
sd(y)
mean(x)
mean(y)
install.packages("Hmisc")
library(Hmisc)
data.frame(x,y)
xy<- data.frame(x,y)
rcorr(xy)
rcorr(x,y)
r<- rcorr(x,y)
r
r<- cor(x,y)
r
cor.test(x,y)
x<- c(29,40,54,55,72)
y<- c(0.49, 1.59, 1.69, 1.82, 3.1)
mean(x)
mean(y)
cor(x,y)
cor.test(x,y)
library(shiny)
library(dplyr)
library(plotly)
shiny::runApp('Documents/a8-building-applications')
library(shiny)
library(dplyr)
library(plotly)
data<- datasets::iris
build<- function(width, column){
data$hover<- with(data, paste(Species, '<br>', "Sepal width:", Sepal.Width, '<br>', "Sepal length:",Sepal.Length))
map<- plot_ly(data, z = eval(parse(text = column))
x = Sepal.Length,
y = Sepal.Width,
text = hover
mode = "markers",
color = Sepal.Length
size = Sepal.Length
)
}
data$hover<- with(data, paste(Species, '<br>', "Sepal width:", Sepal.Width, '<br>', "Sepal length:",Sepal.Length))
map<- plot_ly(data, z = eval(parse(text = column))
x = Sepal.Length,
y = Sepal.Width,
text = hover
mode = "markers",
color = Sepal.Length
size = Sepal.Length
)
library(plotly)
data<- datasets::iris
library(shiny)
library(dplyr)
library(plotly)
data<- datasets::iris
set.seed(10)
build<- function(width, column){
data$hover<- with(data, paste(Species, '<br>', "Sepal width:", Sepal.Width, '<br>', "Sepal length:",Sepal.Length))
map<- plot_ly(width, z = eval(parse(text = column))
x = width,
y = Sepal.Width,
text = hover
mode = "markers",
color = Sepal.Length
size = Sepal.Length
return(map)
)
}
data<- datasets::iris
set.seed(10)
build<- function(width, column){
data$hover<- with(data, paste(Species, '<br>', "Sepal width:", Sepal.Width, '<br>', "Sepal length:",Sepal.Length))
map<- plot_ly(width, z = eval(parse(text = column))
x = width,
y = Sepal.Width,
text = hover
mode = "markers",
color = Sepal.Length
size = Sepal.Length
return(map)
)
}
build<- function(width, column){
data$hover<- with(data, paste(Species, '<br>', "Sepal width:", Sepal.Width, '<br>', "Sepal length:",Sepal.Length))
map<- plot_ly(width, z = eval(parse(text = column)
x = width,
y = Sepal.Width,
text = hover
mode = "markers",
color = Sepal.Length
size = Sepal.Length
return(map)
))
}
build<- function(width, column){
data$hover<- with(data, paste(Species, '<br>', "Sepal width:", Sepal.Width, '<br>', "Sepal length:",Sepal.Length)),
map<- plot_ly(width, z = eval(parse(text = column)
x = width,
y = Sepal.Width,
text = hover
mode = "markers",
color = Sepal.Length
size = Sepal.Length
return(map)
))
}
data<- datasets::iris
data$hover<- with(data, paste(Species, '<br>', "Sepal width:", 'Sepal.Width', '<br>', "Sepal length:",'Sepal.Length')),
data$hover<- with(data, paste(Species, '<br>', "Sepal width:", 'Sepal.Width', '<br>', "Sepal length:",'Sepal.Length'))
map<- plot_ly(width, z = eval(parse(text = column)
x = width,
y = Sepal.Width,
text = hover
mode = "markers",
color = Sepal.Length
size = Sepal.Length
return(map)
))
}
map<- plot_ly(data, z = eval(parse(text = column)
x = width,
y = Sepal.Width,
text = hover
mode = "markers",
color = Sepal.Length
size = Sepal.Length
return(map)
))
}
graph<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
set.seed(100)
plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
set.seed(100)
graphy<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
set.seed(100)
graphy<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
set.seed(100)
graph<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
library(shiny)
library(dplyr)
library(plotly)
data<- datasets::iris
set.seed(100)
graph<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
data$hover<- with(data, paste(Species, '<br>', "Sepal width:", 'Sepal.Width', '<br>', "Sepal length:",'Sepal.Length'))
data$hover<- with(data, paste(Species, '<br>', "Sepal width:", 'Sepal.Width', '<br>', "Sepal length:",'Sepal.Length'))
set.seed(100)
plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
d<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
d<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
d<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
View(d)
graph = plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
graph = plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length, size = Sepal.Length)
graph<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length,         size = Sepal.Length)
graph<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length,         size = Sepal.Length)
library(plotly)
graph<- plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length,         size = Sepal.Length)
View(graph)
graph<- plot_ly( x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length,         size = Sepal.Length)
plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length,         size = Sepal.Length)
plot_ly(data, x = Sepal.Width, y = Sepal.Length, text = hover, mode = "markers", color = Sepal.Length,size =  Sepal.Length)
plot_ly(data, x = Sepal.Width, y = Sepal.Length,
text = hover,
mode = "markers",
color = Sepal.Length,
size =  Sepal.Length)
map<- plot_ly(data, x = Sepal.Width, y = Sepal.Length,
map<- plot_ly(data, x = Sepal.Width, y = Sepal.Length,
text = hover,
mode = "markers",
color = Sepal.Length,
size =  Sepal.Length)
s
map<- plot_ly(data, x = Sepal.Width, y = Sepal.Length,
text = hover,
mode = "markers",
color = Sepal.Length,
size =  Sepal.Length)
layout(title = Sepal length and width)
map<- plot_ly(data, x = Sepal.Width, y = Sepal.Length,
text = hover,
mode = "markers",
color = Sepal.Length,
size =  Sepal.Length) %>%
layout(title = "Sepal length and width")
plot_ly(data, x = Sepal.Width, y = Sepal.Length,
text = hover,
mode = "markers",
color = Sepal.Length,
size =  Sepal.Length) %>%
layout(title = "Sepal length and width")
shiny::runApp('Documents/a8-building-applications')
shiny::runApp('Documents/a8-building-applications')
data<- iris
View(data)
library(shiny)
library(plotly)
library(dplyr)
data<- iris
shinyServer(function(input, output) {
output$main_plot <- renderPlot({
graph<- hist(data$Sepal.Length,
probability = TRUE,
breaks = as.numeric(input$n_breaks),
col = c("red", "yellow", "green", "violet", "orange",
"blue", "pink", "cyan"),
xlab = "Sepal Length",
main = "Iris dataset")
if (input$Sepal_length) {
rug(data$Sepal.Length)
}
if (input$density) {
dens <- density(data$Sepal.Length,
adjust = input$bw_adjust)
lines(dens, col = "blue")
}
return(graph)
})
})
library(shiny)
library(plotly)
shinyUI(bootstrapPage(
selectInput(input = "n_breaks",
choices = c(1,2,3,4,5,6,7,8,9,10),
label = list("Sepal Length"),
selected = 2),
checkboxInput(input = "Sepal_length",
label = strong("Show sepal length"),
value = FALSE),
checkboxInput(input = "density",
label = strong("Show density estimate of Sepal length"),
value = FALSE),
plotOutput(outputId = "main_plot", width = "20%", height = "15cm"),
conditionalPanel(condition = "input$density == true",
sliderInput(input = "bw_adjust",
label = "Bandwidth adjustment:",
min = 0.2, max = 2, value = 1, step = 0.2)
)
))
shiny::runApp('Documents/INFO_a8')
mean(data$Sepal.Length)
shiny::runApp('Documents/INFO_a8')
shiny::runApp('Documents/INFO_a8')
shiny::runApp('Documents/INFO_a8')
shiny::runApp('Documents/INFO_a8')
shiny::runApp('Documents/INFO_a8')
shiny::runApp('Documents/INFO_a8')
x<- (12,14,17,10,8,9,12,14,18,16)
y<- (2,1,0,3,5,3,4,3,2,0,2)
x<- c(12,14,17,10,8,9,12,14,18,16)
y<- c(2,1,0,3,5,3,4,3,2,0,2)
length(x)
length(y)
x<- c(12,14,17,10,8,9,12,14,18,16)
y<- c(2,1,0,3,5,3,4,2,0,2)
plot_ly(x,y)
library(plotly)
plot_ly(x,y)
plot_ly(x = x,y = y, type = "scatterplot")
data.frame(x,y)
b<-data.frame(x,y)
View(b)
plot_ly(x = x,y = y, type = "scatter")
x<- c(12,14,17,10,8,9,12,14,18,16)
y<- c(2,1,0,3,5,3,4,2,0,2)
plot_ly(b, type = "scatter")
library(plotly)
b<-data.frame(x,y)
View(b)
b<-data.frame(x,y)
plot_ly(b, type = "scatter")
mean(x)
mean(y)
sd(x)
sd(y)
cor(x,y)
cor.test(x,y)
1.37/1.889
1.37/1.889 * 0.725
0.526ï¼Š1.889
0.526*1.889
1.37 - 0.993
setwd("/Users/Edward/Documents/Final-Project-X/data")
newdata<- read.csv("Summarized data.csv")
newdata<- data %>% filter() %>%
select(UNITID, INSTNM, CITY, STABBR, ZIP, AccredAgency, INSTURL, NPCURL, main, LATITUDE,
LONGITUDE, ADM_RATE, SATVR25, SATVR75, SATMT25, SATMT75, SATWR25, SATWR75,
SATVRMID,SATMTMID,SATWRMID, ACTCM25, ACTCM75, ACTEN25, ACTEN75, ACTMT25,
ACTMT75, ACTWR25, ACTWR75, ACTCMMID, ACTENMID, ACTMTMID, ACTWRMID, SAT_AVG,
COSTT4_A, TUITIONFEE_IN, TUITIONFEE_OUT, UGDS_WHITE, UGDS_HISP, UGDS_BLACK,
UGDS_ASIAN)
library(dplyr)
library(plotly)
newdata<- data %>% filter() %>%
select(UNITID, INSTNM, CITY, STABBR, ZIP, AccredAgency, INSTURL, NPCURL, main, LATITUDE,
LONGITUDE, ADM_RATE, SATVR25, SATVR75, SATMT25, SATMT75, SATWR25, SATWR75,
SATVRMID,SATMTMID,SATWRMID, ACTCM25, ACTCM75, ACTEN25, ACTEN75, ACTMT25,
ACTMT75, ACTWR25, ACTWR75, ACTCMMID, ACTENMID, ACTMTMID, ACTWRMID, SAT_AVG,
COSTT4_A, TUITIONFEE_IN, TUITIONFEE_OUT, UGDS_WHITE, UGDS_HISP, UGDS_BLACK,
UGDS_ASIAN)
newdata$hover <- paste(newdata$INSTNM, "has", newdata$ADM_RATE, "percent",
'<br>', "Location:",newdata$CITY, newdata$ZIP)
build_map<- function(add){
m <- list(
colorbar = list(title = "Admission Rate"),
size = 5, opacity = 0.8, symbol = 'circle')
g <- list(
scope = 'usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
plot_ly(add, lat = LATITUDE, lon = LONGITUDE, text = hover, color = ADM_RATE,
type = 'scattergeo', locationmode = 'USA-states', mode = 'markers') %>%
layout(title = "US College Cards", geo = g)
}
build_map(newdata)
build_map<- function(add){
m <- list(
colorbar = list(title = "Admission Rate"),
size = 5, opacity = 0.8, symbol = 'circle')
g <- list(
scope = 'usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
plot_ly(add, lat = LATITUDE, lon = LONGITUDE, text = hover, color = ADM_RATE,
type = 'scattergeo', locationmode = 'USA-states') %>%
layout(title = "US College Cards", geo = g)
}
build_map(newdata)
build_map<- function(add){
m <- list(
colorbar = list(title = "Admission Rate"),
size = 5, opacity = 0.8, symbol = 'circle')
newdata$hover <- paste(newdata$INSTNM, "has", newdata$ADM_RATE, "percent",
'<br>', "Location:",newdata$CITY, newdata$ZIP)
g <- list(
scope = 'usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
plot_ly(add, lat = LATITUDE, lon = LONGITUDE, text = hover,
type = 'scattergeo', locationmode = 'USA-states', mode = "markers") %>%
layout(title = "US College Cards", geo = g)
}
build_map(newdata)
build_map<- function(add){
m <- list(
colorbar = list(title = "Admission Rate"),
size = 5, opacity = 0.8, symbol = 'circle')
newdata$hover <- paste(newdata$INSTNM, "has", newdata$ADM_RATE, "percent",
'<br>', "Location:",newdata$CITY, newdata$ZIP)
g <- list(
scope = 'usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
plot_ly(add, lat = LATITUDE, lon = LONGITUDE, text = hover, color = 'SAT_AVG',
type = 'scattergeo', locationmode = 'USA-states', mode = "markers") %>%
layout(title = "US College Cards", geo = g)
}
build_map(newdata)
View(newdata)
m <- list(
colorbar = list(title = "Admission Rate"),
size = 5, opacity = 0.8, symbol = 'circle')
build_map<- function(add){
m <- list(
colorbar = list(title = "Admission Rate"),
size = 5, opacity = 0.8, symbol = 'circle')
newdata$hover <- paste(newdata$INSTNM, "has", newdata$ADM_RATE, "percent",
'<br>', "Location:",newdata$CITY, newdata$ZIP)
g <- list(
scope = 'usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
plot_ly(add, lat = LATITUDE, lon = LONGITUDE, text = hover, color = 'SAT_AVG',
type = 'scattergeo', locationmode = 'USA-states', mode = "markers", marker = m) %>%
layout(title = "US College Cards", geo = g)
}
build_map(newdata)
build_map<- function(add){
m <- list(
colorbar = list(title = "Admission Rate"),
size = 5, opacity = 0.8, symbol = 'circle')
newdata$hover <- paste(newdata$INSTNM, "has", newdata$ADM_RATE, "percent",
'<br>', "Location:",newdata$CITY, newdata$ZIP)
g <- list(
scope = 'usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
plot_ly(add, lat = LATITUDE, lon = LONGITUDE, text = hover, color = 'ADM_RATE',
type = 'scattergeo', locationmode = 'USA-states', mode = "markers", marker = m) %>%
layout(title = "US College Cards", geo = g)
}
build_map(newdata)
